!function(s){var t,a,c,n,e,i,o,d,r;function g(e){s("button.gift_card_add_to_cart_button").attr("disabled",!e)}function l(){var t=s("button.ywgc-amount-buttons"),a=s("input.ywgc-amount-buttons"),e=s("button.ywgc-amount-buttons:first"),c=(e.addClass("selected_button"),e.hasClass("selected_button")&&s("input.ywgc-amount-buttons:first").attr("name","gift_amounts"),s(".ywgc-form-preview-amount").text(e.data("wc-price")),t.on("click",function(e){e.preventDefault(),t.removeClass("selected_button"),a.removeClass("selected_button"),a.removeAttr("name"),s(this).addClass("selected_button"),s(this).next().addClass("selected_button")}),e.data("wc-price"));t.on("click",function(e){e.preventDefault(),a.removeAttr("name"),t.data("price")?(g(!0),c=s("input.selected_button").data("wc-price"),s("input.selected_button").attr("name","gift_amounts")):g(!1),e=c,s(".ywgc-form-preview-amount").text(e)})}function u(e,t){var e=s(e).closest("div.ywgc-gift-card-content"),a=e.find("div.ywgc-gift-card-edit-details"),e=e.find("div.ywgc-gift-card-details");t?(a.removeClass("ywgc-hide"),a.addClass("ywgc-show"),e.removeClass("ywgc-show"),e.addClass("ywgc-hide")):(a.removeClass("ywgc-show"),a.addClass("ywgc-hide"),e.removeClass("ywgc-hide"),e.addClass("ywgc-show"))}function m(){c(s("div.cart_totals")),s.ajax({url:e("get_cart_totals"),dataType:"html",success:function(e){s("div.cart_totals").replaceWith(e)}}),s(document.body).trigger("update_checkout")}"undefined"!=typeof ywgc_data&&(s(document).on("ywgc-picture-changed",function(e,t,a){s(".ywgc-template-design").remove(),s(".ywgc-design-type").remove(),s("form.cart").append('<input type="hidden" class="ywgc-design-type" name="ywgc-design-type" value="'+t+'">'),s("form.cart").append('<input type="hidden" class="ywgc-template-design" name="ywgc-template-design" value="'+a+'">')}),s(function(){s(".datepicker").datepicker({dateFormat:ywgc_data.date_format,minDate:1,maxDate:"+1Y"}),s(".ywgc-choose-design-preview .ywgc-design-list li:first-child .ywgc-preset-image img").click()}),l(),t=s(".product-type-gift-card .woocommerce-product-gallery__image a"),a=s(".product-type-gift-card .woocommerce-product-gallery__image--placeholder"),s(".ywgc-preset-image.ywgc-default-product-image img").addClass("selected_design_image"),s(document).on("click","form.gift-cards_form.cart .ywgc-preset-image img",function(e){e.preventDefault();var e=s(this).parent().data("design-id");s(".ywgc-preset-image img").removeClass("selected_design_image"),s(this).addClass("selected_design_image"),s(document).trigger("ywgc-picture-changed",["template",e]),s(this).hasClass("selected_design_image")&&(e='<img src="'+(e=s(this).parent().data("design-url"))+'" class="wp-post-image size-full" alt="" data-caption="" data-src="'+e+'" data-large_image="'+e+'" data-large_image_width="1024" data-large_image_height="1024" sizes="(max-width: 600px) 100vw, 600px" '+s(this).attr("srcset")+'width="600" height="600">',(0!=t.length?s(".product-type-gift-card .woocommerce-product-gallery__image a"):(s(".woocommerce-product-gallery__image--placeholder img").remove,a)).html(e))}),s(document).on("click",".ywgc-preset-image img",function(e){e.preventDefault();e=s(this).parent().data("design-id");s(".ywgc-preset-image img").removeClass("selected_design_image"),s(".ywgc-preset-image").removeClass("selected_image_parent"),s(this).addClass("selected_design_image"),s(this).parent().addClass("selected_image_parent"),s(document).trigger("ywgc-picture-changed",["template",e])}),s(document).on("click","a.ywgc-show-giftcard",function(){return s(".ywgc_enter_code").slideToggle(300,function(){s(".yith_wc_gift_card_blank_brightness").length||(s(".ywgc_enter_code").find(":input:eq( 0 )").focus(),s(".ywgc_enter_code").keyup(function(e){13===e.keyCode&&s("button.ywgc_apply_gift_card_button").click()}))}),!1}),s("button.ywgc-do-edit").css("display","inline"),s(document).on("input","#ywgc-edit-message",function(e){s(".ywgc-card-message").html(s("#ywgc-edit-message").val())}),s(document).on("change",".gift-cards-list select",function(e){l()}),s(document).on("click","a.customize-gift-card",function(e){e.preventDefault(),s("div.summary.entry-summary").after('<div class="ywgc-customizer"></div>')}),s(".variations_form.cart").on("found_variation",function(e,t){void 0!==t&&(t=(""!=t.price_html?s(t.price_html):s(".product-type-variable").find(".woocommerce-Price-amount.amount").first()).html(),t=t,s("div.ywgc-card-amount span.amount").html(t))}),s(document).on("click","button.ywgc-apply-edit",function(e){var t=s(this),a=t.closest("div.ywgc-gift-card-content"),c=a.find('input[name="ywgc-edit-sender"]').val(),n=a.find('input[name="ywgc-edit-recipient"]').val(),i=a.find('textarea[name="ywgc-edit-message"]').val(),o=a.find('input[name="ywgc-item-id"]').val(),d=a.find('input[name="ywgc-gift-card-id"]'),r=d.val();t.hasClass("apply")&&(r={action:"edit_gift_card",gift_card_id:r,item_id:o,sender:c,recipient:n,message:i},a.block({message:null,overlayCSS:{background:"#fff url("+ywgc_data.loader+") no-repeat center",opacity:.6}}),s.post(ywgc_data.ajax_url,r,function(e){0<e.code&&(a.find("span.ywgc-sender").text(c),a.find("span.ywgc-recipient").text(n),a.find("span.ywgc-message").text(i),2==e.code)&&d.val(e.values.new_id),a.unblock(),u(t,!1)}))}),s(document).on("click","button.ywgc-cancel-edit",function(e){u(s(this),!1)}),s(document).on("click","button.ywgc-do-edit",function(e){u(s(this),!0)}),s(document).on("click",".ywgc-gift-card-content a.edit-details",function(e){e.preventDefault(),s(this).addClass("ywgc-hide"),s("div.ywgc-gift-card-details").toggleClass("ywgc-hide")}),s('.ywgc-single-recipient input[name="ywgc-recipient-email[]"]').each(function(e,t){s(this).on("input",function(){s(this).closest(".ywgc-single-recipient").find(".ywgc-bad-email-format").remove()})}),s(document).on("submit",".gift-cards_form",function(e){var c=!0;s('.ywgc-single-recipient input[name="ywgc-recipient-email[]"]').each(function(e,t){var a;s(this).val()&&(a=s(this).val(),!new RegExp("^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$","i").test(a))&&(s(this).closest(".ywgc-single-recipient").find(".ywgc-bad-email-format").remove(),s(this).after('<span class="ywgc-bad-email-format">'+ywgc_data.email_bad_format+"</span>"),c=!1)}),c||e.preventDefault()}),s(document).on("click","a.ywgc-remove-gift-card ",function(e){e.preventDefault();var t=s(e.currentTarget).parents("table"),e=s(e.currentTarget).data("gift-card-code"),e=(c(t),{security:ywgc_data.gift_card_nonce,code:e,action:"ywgc_remove_gift_card_code"});s.ajax({type:"POST",url:ywgc_data.ajax_url,data:e,dataType:"html",success:function(e){i(e),s(document.body).trigger("removed_gift_card"),n(t)},complete:function(){m()}})}),s(document).on("click","button.ywgc_apply_gift_card_button",function(e){e.preventDefault();var t=s(this).closest("div.ywgc_enter_code"),a=(c(t),t.find('input[ name="gift_card_code" ]')),e=a.val(),e={security:ywgc_data.gift_card_nonce,code:e,action:"ywgc_apply_gift_card_code"};s.ajax({type:"POST",url:ywgc_data.ajax_url,data:e,dataType:"html",success:function(e){i(e),s(document.body).trigger("applied_gift_card")},complete:function(){n(t),a.val(""),m()}})}),c=function(e){e.addClass("processing").block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},n=function(e){e.removeClass("processing").unblock()},e=function(e){return ywgc_data.wc_ajax_url.toString().replace("%%endpoint%%",e)},i=function(e){s(".woocommerce-error, .woocommerce-message").remove(),s(ywgc_data.notice_target).after(e),s(".ywgc_have_code").length&&s(".ywgc_enter_code").slideUp("300")},s(document).on("qv_loader_stop yit_quick_view_loaded flatsome_quickview",function(){l()}),s(document).on("click","button.yith-add-new-gc-my-account-button",function(e){e.preventDefault(),s(this).parent().prev(".form-link-gift-card-to-user").toggle("slow")}),(o=s(".ywgc-recipient-name input")).on("change keyup",function(e){e.preventDefault();e=o.val();s(".ywgc-form-preview-to-content").text(e)}),(d=s(".ywgc-sender-name input")).on("change keyup",function(e){e.preventDefault();e=d.val();s(".ywgc-form-preview-from-content").text(e)}),(r=s(".ywgc-message textarea")).on("change keyup",function(e){e.preventDefault();e=r.val();s(".ywgc-form-preview-message").text(e)}))}(jQuery);