function ttt_onElementInserted(t,s,c,i){"MutationObserver"in window?(t=jQuery(t)[0],new(window.MutationObserver||window.WebKitMutationObserver)(function(t){t.forEach(function(t){var e,n,o;t.addedNodes.length&&jQuery(t.addedNodes).length&&(e=s,n=jQuery(t.addedNodes).filter(s),""!=c&&(n=n.find(c),e=s+" "+c),n.each(function(t){i(jQuery(this),t+1,n.length,e,!0)}),n.length||(o=jQuery(t.addedNodes).find(e)).each(function(t){i(jQuery(this),t+1,o.length,e,!0)}))})}).observe(t,{childList:!0,subtree:!0})):console.log("No MutationObserver")}function ttt_getParameterByName(t,e){e=e||window.location.href,t=t.replace(/[\[\]]/g,"\\$&");e=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(e);return e?e[2]?decodeURIComponent(e[2].replace(/\+/g," ")):"":null}var ttt_pnwc={messages:[],open:!1,sounds:{},init:function(){this.handle_sounds(),this.initializePopup(),"yes"===ttt_pnwc_info.ajax_opt&&(ttt_onElementInserted("body",".woocommerce-error","li",ttt_pnwc.readNotice),ttt_onElementInserted("body",".woocommerce-message","",ttt_pnwc.readNotice),ttt_onElementInserted("body",".woocommerce-info","",ttt_pnwc.readNotice)),ttt_pnwc.checkExistingElements(".woocommerce-error li"),ttt_pnwc.checkExistingElements(".woocommerce-message"),ttt_pnwc.checkExistingElements(".woocommerce-info"),document.addEventListener("click",function(t){t.target.matches(".enable-terms-checkbox")&&(t.preventDefault(),ttt_pnwc.enable_terms_checkbox())},!1),document.addEventListener("click",this.handle_click_inside_close,!0)},handle_click_inside_close:function(t){"yes"==ttt_pnwc_info.click_inside_close&&event.target.matches("a,button")&&t.target.closest(".ttt-pnwc-modal")&&MicroModal.close("ttt-pnwc-notice")},enable_terms_checkbox:function(){document.getElementById("terms").checked="checked"},handle_sounds:function(){"yes"===ttt_pnwc_info.audio.enabled&&(ttt_pnwc_info.audio.hasOwnProperty("opening")&&""!==ttt_pnwc_info.audio.opening&&(ttt_pnwc.sounds.opening=new Audio(ttt_pnwc_info.audio.opening)),ttt_pnwc_info.audio.hasOwnProperty("closing")&&""!==ttt_pnwc_info.audio.closing&&(ttt_pnwc.sounds.closing=new Audio(ttt_pnwc_info.audio.closing)))},open_popup_by_query_string:function(t){t=ttt_getParameterByName(t=t||"ttt_pnwc");null!==t&&""!==t&&(ttt_pnwc.clearPopupMessages(),ttt_pnwc.messages.push({message:"Customize Popup Notices style easily!",type:"success"}),ttt_pnwc.messages.push({message:"Please take a look at an error message",type:"error"}),ttt_pnwc.messages.push({message:"And a default one too",type:"info"}),ttt_pnwc.messages.push({message:"Don't forget the <a target='_blank' href='https://en.wikipedia.org/wiki/Link'>links</a> too",type:"info"}),ttt_pnwc.addMessagesToPopup(),ttt_pnwc.openPopup())},checkExistingElements:function(e){var n=jQuery(e);n.length&&n.each(function(t){ttt_pnwc.readNotice(jQuery(this),t+1,n.length,e,!1)})},readNotice:function(t,e,n,o,s){var c="success";-1<o.indexOf("error")?c="error":-1<o.indexOf("info")&&(c="info"),"yes"===ttt_pnwc_info.types[c]&&(e<=n&&ttt_pnwc.storeMessage(t,c,s),e==n&&(ttt_pnwc.clearPopupMessages(),ttt_pnwc.addMessagesToPopup(),ttt_pnwc.openPopup(t)))},clearPopupMessages:function(){jQuery("#ttt-pnwc-notice").find(".ttt-pnwc-content").empty()},clearMessages:function(){ttt_pnwc.messages=[]},removeDuplicatedMessages:function(){for(var t,e={},n=0,o=ttt_pnwc.messages.length;n<o;n++)e[ttt_pnwc.messages[n].message]=ttt_pnwc.messages[n];for(t in ttt_pnwc.messages=new Array,e)ttt_pnwc.messages.push(e[t])},hashMessage:function(t){return t.split("").reduce(function(t,e){return(t=(t<<5)-t+e.charCodeAt(0))&t},0)},setCookie:function(t,e,n){var o=n?((o=new Date).setTime(o.getTime()+60*n*60*1e3),"; expires="+o.toGMTString()):"";document.cookie=t+"="+e+o+"; path=/"},getCookie:function(t){return 0<document.cookie.length&&(c_start=document.cookie.indexOf(t+"="),-1!=c_start)?(c_start=c_start+t.length+1,c_end=document.cookie.indexOf(";",c_start),-1==c_end&&(c_end=document.cookie.length),unescape(document.cookie.substring(c_start,c_end))):""},isMessageValid:function(e,t){if(0==e.trim().length)return!1;if(ttt_pnwc_info.ignored_msg.field&&""!==ttt_pnwc_info.ignored_msg.field)if("regex"===ttt_pnwc_info.ignored_msg.search_method){if(0<ttt_pnwc_info.ignored_msg.field.filter(function(t){return new RegExp(t,ttt_pnwc_info.ignored_msg.regex_flags).test(e)}).length)return!1}else if("partial_comparison"===ttt_pnwc_info.ignored_msg.search_method){if(0<ttt_pnwc_info.ignored_msg.field.filter(function(t){return-1!==e.indexOf(t)}).length)return!1}else if("full_comparison"===ttt_pnwc_info.ignored_msg.search_method)if(0<ttt_pnwc_info.ignored_msg.field.filter(function(t){return t.trim()===e.trim()}).length)return!1;return"yes"!==ttt_pnwc_info.cookie_opt.enabled||!(-1!=ttt_pnwc_info.cookie_opt.message_origin.search("dynamic")&&t||-1!=ttt_pnwc_info.cookie_opt.message_origin.search("static")&&!t||-1!=ttt_pnwc_info.cookie_opt.message_origin.search("all"))||!ttt_pnwc.getCookie(ttt_pnwc.hashMessage(e))},saveMessageInCookie:function(t){"yes"===ttt_pnwc_info.cookie_opt.enabled&&(t=ttt_pnwc.hashMessage(t),ttt_pnwc.setCookie(t,t,ttt_pnwc_info.cookie_opt.time))},storeMessage:function(t,e,n){ttt_pnwc.isMessageValid(t.html(),n)&&(ttt_pnwc.saveMessageInCookie(t.html()),ttt_pnwc.messages.push({message:t.html().trim(),type:e,dynamic:n}),ttt_pnwc.removeDuplicatedMessages())},getAdditionalIconClass:function(t){var e="";switch(t){case"success":e=ttt_pnwc_info.success_icon_class;break;case"error":e=ttt_pnwc_info.error_icon_class;break;case"info":e=ttt_pnwc_info.info_icon_class}return""==e&&(e+=" "+ttt_pnwc_info.icon_default_class),e},addMessagesToPopup:function(t){jQuery.each(ttt_pnwc.messages,function(t,e){var n=ttt_pnwc.getAdditionalIconClass(e.type),o=e.dynamic?"ttt-dynamic":"ttt-static";jQuery("#ttt-pnwc-notice .ttt-pnwc-content").append("<div class='ttt-pnwc-notice "+e.type+" "+o+" '><i class='ttt-pnwc-notice-icon "+n+"'></i><div class='ttt-pnwc-message'>"+e.message+"</div></div>")})},initializePopup:function(){MicroModal.init({awaitCloseAnimation:!0})},autoClose:function(t){var e=ttt_pnwc.messages.map(function(t){return t.type}).filter(function(t,e,n){return n.indexOf(t)===e}).filter(function(t){return-1!==ttt_pnwc_info.auto_close_types.indexOf(t)});(0===ttt_pnwc_info.auto_close_types.length||0<e.length)&&0<ttt_pnwc_info.auto_close_time&&setTimeout(function(){MicroModal.close(t.id)},1e3*ttt_pnwc_info.auto_close_time)},openPopup:function(){!ttt_pnwc.open&&0<ttt_pnwc.messages.length&&("yes"===ttt_pnwc_info.audio.enabled&&ttt_pnwc.sounds.opening&&ttt_pnwc.sounds.opening.play(),MicroModal.show("ttt-pnwc-notice",{awaitCloseAnimation:!0,onShow:function(t){ttt_pnwc.autoClose(t)},onClose:function(t){ttt_pnwc.open=!1,ttt_pnwc.clearMessages(),"yes"===ttt_pnwc_info.audio.enabled&&ttt_pnwc.sounds.closing&&ttt_pnwc.sounds.closing.play()}}))}};document.addEventListener("DOMContentLoaded",function(){ttt_pnwc.init(),ttt_pnwc.open_popup_by_query_string(),jQuery("body").trigger({type:"ttt_pnwc",obj:ttt_pnwc})});