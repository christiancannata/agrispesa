"use strict";function wpieSetToolTip(){"function"==typeof jQuery.fn.tipso&&jQuery(".wpie_data_tipso").length&&jQuery(".wpie_data_tipso").tipso({useTitle:!1,background:"rgba(0,0,0,0.8)",color:"#ffffff",size:"small",tooltipHover:!0})}function wpieHandleAjaxError(e,i){var t="";return t=0===e.status?wpiePluginSettings.wpieLocalizeText.wpie_ajax_not_connect_error:400===e.status?wpiePluginSettings.wpieLocalizeText.wpie_ajax_400_error:404===e.status?wpiePluginSettings.wpieLocalizeText.wpie_ajax_404_error:500===e.status?wpiePluginSettings.wpieLocalizeText.wpie_ajax_internal_server_error:"parsererror"===i?wpiePluginSettings.wpieLocalizeText.wpie_ajax_jason_parse_error:"timeout"===i?wpiePluginSettings.wpieLocalizeText.wpie_ajax_time_out_error:"abort"===i?wpiePluginSettings.wpieLocalizeText.wpie_ajax_request_aborted_error:wpiePluginSettings.wpieLocalizeText.wpie_ajax_uncaught_error+e.responseText,wpieSetErrorMsg(t),!1}function wpieSetErrorMsg(e){wpieHideLoader(),jQuery(".wpie_error_content").html(e);var i=new bootstrap.Modal(jQuery(".wpie_error_model"),{backdrop:!0});i.show()}function wpieSetSuccessMsg(e){jQuery.notify({message:'<i class="far fa-check-circle"></i> '+e},{type:"success",placement:{align:"right",from:"bottom"},animate:{enter:"animate__animated animate__fadeInUp",exit:"animate__animated animate__fadeOutDown"}})}function wpieShowLoader(){jQuery(".wpie_loader").removeClass("wpie_hidden")}function wpieHideLoader(){jQuery(".wpie_loader").addClass("wpie_hidden")}function wpieGetTemplates(){var e={action:"wpie_get_tempaltes",wpieSecurity:wpiePluginSettings.wpieSecurity};jQuery.ajax({url:wpiePluginSettings.wpieAjaxURL,type:"GET",data:e,dataType:"json",async:!0,success:function(e){return"error"===e.status?(wpieSetErrorMsg(e.message),!1):(jQuery(".wpie_template_list").html(e.html).trigger("chosen:updated"),void wpieHideLoader())},error:function(e,i){wpieHandleAjaxError(e,i)}})}function wpie_update_process_status(e,i){wpieShowLoader();var t={action:"wpie_update_process_status",wpie_process_id:i,process_status:e,wpieSecurity:wpiePluginSettings.wpieSecurity};jQuery.ajax({url:wpiePluginSettings.wpieAjaxURL,type:"GET",data:t,dataType:"json",success:function(e){return wpieHideLoader(),"error"===e.status?(wpieSetErrorMsg(e.message),!1):void wpieSetSuccessMsg(e.message)},error:function(e,i){wpieHandleAjaxError(e,i)}})}function wpieDeleteTemplates(e,i){var t={action:"wpie_delete_tempaltes",templates:e,process_type:i,wpieSecurity:wpiePluginSettings.wpieSecurity};jQuery.ajax({url:wpiePluginSettings.wpieAjaxURL,type:"GET",data:t,dataType:"json",async:!0,success:function(e){return"error"===e.status?(wpieSetErrorMsg(e.message),!1):(wpieSetSuccessMsg(e.message),void wpieHideLoader())},error:function(e,i){wpieHandleAjaxError(e,i)}})}function wpieChangeLicenseStatus(e,i){var t={action:"wpie_change_license_status",status:e,license:i,wpieSecurity:wpiePluginSettings.wpieSecurity};jQuery.ajax({url:wpiePluginSettings.wpieAjaxURL,type:"POST",data:t,dataType:"json",async:!0,success:function(i){return i.success===!1?(wpieSetErrorMsg(i.data),!1):("activate"===e?(jQuery(".wpie_license_activation_wrapper").hide(),jQuery(".wpie_license_deactivation_wrapper").show()):(jQuery(".wpie_license_activation_wrapper").show(),jQuery(".wpie_license_deactivation_wrapper").hide()),wpieSetSuccessMsg(i.data),void wpieHideLoader())},error:function(e,i){wpieHandleAjaxError(e,i)}})}window.wpiePluginSettings=window.wpiePluginSettings||{},jQuery(document).ready(function(e){"function"==typeof jQuery.fn.chosen&&jQuery(".wpie_content_data_select").length&&jQuery(".wpie_content_data_select").chosen(),wpieSetToolTip()}),jQuery(document).on("click",".wpie_content_data_header",function(){var e=jQuery(this).closest(".wpie_section_wrapper").find(".wpie_section_content");jQuery(this).hasClass("wpie_section_wrapper_selected")?(jQuery(this).removeClass("wpie_section_wrapper_selected"),jQuery(this).hasClass("wpie_field_mapping_section")&&jQuery(this).closest(".wpie_section_wrapper").find(".wpie_field_mapping_fields_wrapper").slideUp()):(jQuery(this).addClass("wpie_section_wrapper_selected"),jQuery(this).hasClass("wpie_field_mapping_section")&&jQuery(this).closest(".wpie_section_wrapper").find(".wpie_field_mapping_fields_wrapper").slideDown()),e.slideToggle("slow")}),jQuery(document).on("click",".wpie_ext_save",function(){wpieShowLoader();var e=jQuery(".wpie_general_frm").serialize();jQuery.ajax({url:wpiePluginSettings.wpieAjaxURL,type:"POST",data:"action=wpie_ext_save_extensions&wpieSecurity="+wpiePluginSettings.wpieSecurity+"&"+e,dataType:"json",async:!0,success:function(e){return wpieHideLoader(),"error"===e.status?(wpieSetErrorMsg(e.message),!1):void wpieSetSuccessMsg(e.message)},error:function(e,i){wpieHandleAjaxError(e,i)}})}),jQuery(document).on("click",".wpie_ext_save_data",function(){var e=!1;if(jQuery(".wpie_content_data_input").each(function(){return""===jQuery(this).val()?(e=!0,!0):void 0}),e)return wpieSetErrorMsg(wpiePluginSettings.wpieLocalizeText.wpieFillRequiredFieldText),!1;wpieShowLoader();var i=jQuery(".wpie_ext_settings_frm").serialize();jQuery.ajax({url:wpiePluginSettings.wpieAjaxURL,type:"POST",data:"action=wpie_ext_save_extension_data&wpieSecurity="+wpiePluginSettings.wpieSecurity+"&"+i,dataType:"json",async:!0,success:function(e){return wpieHideLoader(),"error"===e.status?(wpieSetErrorMsg(e.message),!1):void wpieSetSuccessMsg(e.message)},error:function(e,i){wpieHandleAjaxError(e,i)}})}),jQuery(document).on("show.bs.modal",".modal",function(e){var i=999999+10*jQuery(".modal:visible").length;jQuery(this).css("z-index",i),setTimeout(function(){jQuery(".modal-backdrop").not(".modal-stack").css("z-index",i-1).addClass("modal-stack")},0)}),jQuery(document).on("click",".wpie_save_cap_btn",function(){var e=jQuery(".wpie_role_list").val();if(""===e)return wpieSetErrorMsg(wpiePluginSettings.wpieLocalizeText.wpieEmptyUsesrRole),!1;wpieShowLoader();var i=jQuery(".wpie_user_role_frm").serialize();jQuery.ajax({url:wpiePluginSettings.wpieAjaxURL,type:"POST",data:"action=wpie_save_user_cap&wpieSecurity="+wpiePluginSettings.wpieSecurity+"&"+i,dataType:"json",async:!0,success:function(e){return wpieHideLoader(),"error"===e.status?(wpieSetErrorMsg(e.message),!1):void wpieSetSuccessMsg(e.message)},error:function(e,i){wpieHandleAjaxError(e,i)}})}),jQuery(document).on("change",".wpie_role_list",function(){wpieShowLoader();var e=jQuery(this).val(),i={action:"wpie_get_user_cap",user_role:e,wpieSecurity:wpiePluginSettings.wpieSecurity};jQuery.ajax({url:wpiePluginSettings.wpieAjaxURL,type:"GET",data:i,dataType:"json",async:!0,success:function(e){return"error"===e.status?(wpieSetErrorMsg(e.message),!1):(jQuery(".wpie_user_cap").prop("checked",!1),"undefined"!=typeof e.cap&&jQuery.each(e.cap,function(e,i){jQuery("."+i).prop("checked",!0)}),void wpieHideLoader())},error:function(e,i){wpieHandleAjaxError(e,i)}})}),jQuery(document).on("click",".wpie_template_delete_btn",function(){wpieShowLoader();var e=jQuery(".wpie_template_list").val();if(""===e||null===e)return wpieSetErrorMsg(wpiePluginSettings.wpieLocalizeText.wpieEmptyTemplates),!1;var i={action:"wpie_delete_tempaltes",templates:e,wpieSecurity:wpiePluginSettings.wpieSecurity};jQuery.ajax({url:wpiePluginSettings.wpieAjaxURL,type:"GET",data:i,dataType:"json",async:!0,success:function(e){return"error"===e.status?(wpieSetErrorMsg(e.message),!1):(jQuery(".wpie_template_list option:selected").remove(),jQuery(".wpie_template_list").trigger("chosen:updated"),wpieSetSuccessMsg(e.message),void wpieHideLoader())},error:function(e,i){wpieHandleAjaxError(e,i)}})}),jQuery(document).on("click",".wpie_template_export_btn",function(){var e=jQuery(".wpie_template_list").val();return""===e||null===e?(wpieSetErrorMsg(wpiePluginSettings.wpieLocalizeText.wpieEmptyTemplates),!1):void jQuery(".wpie_template_export").submit()}),jQuery(document).on("click",".wpie_template_import_btn",function(){wpieShowLoader();var e=jQuery(".wpie_template_file").val();if(""===e||null===e)return wpieSetErrorMsg(wpiePluginSettings.wpieLocalizeText.wpieChooseValidFileText),!1;var i=e.substr(e.lastIndexOf(".")+1);if("txt"!==i.toLowerCase())return wpieSetErrorMsg(wpiePluginSettings.wpieLocalizeText.wpieChooseValidFileText),!1;var t=jQuery(".wpie_template_file").prop("files")[0],p=new FormData;p.append("wpie_template_file",t),p.append("action","wpie_tempalte_import"),p.append("wpieSecurity",wpiePluginSettings.wpieSecurity),jQuery.ajax({url:wpiePluginSettings.wpieAjaxURL,type:"POST",data:p,dataType:"json",contentType:!1,processData:!1,async:!0,success:function(e){return"error"===e.status?(wpieSetErrorMsg(e.message),!1):(jQuery(".wpie_template_file").val(""),wpieGetTemplates(),void wpieSetSuccessMsg(e.message))},error:function(e,i){wpieHandleAjaxError(e,i)}})}),jQuery(document).on("change",".wpie_log_check_all",function(){jQuery(this).is(":checked")?jQuery(this).closest(".wpie_log_table").find(".wpie_log_check").prop("checked",!0):jQuery(this).closest(".wpie_log_table").find(".wpie_log_check").prop("checked",!1)}),jQuery(document).on("change",".wpie_log_check",function(){var e=jQuery(this).closest(".wpie_log_table");jQuery(this).is(":checked")?e.find(".wpie_log_check:checked").length===e.find(".wpie_log_check").length&&e.find(".wpie_log_check_all").prop("checked",!0):e.find(".wpie_log_check_all").prop("checked",!1)}),jQuery(document).on("click",".wpie_log_action_btn",function(){jQuery(".wpie_active_section").removeClass("wpie_active_section");var e=jQuery(this).closest(".wpie_section_content");e.addClass("wpie_active_section");var i=e.find(".wpie_log_bulk_action").val();if(""===i)return wpieSetErrorMsg(wpiePluginSettings.wpieLocalizeText.wpieEmptyActions),!1;if(0===e.find(".wpie_log_check:checked").length)return wpieSetErrorMsg(wpiePluginSettings.wpieLocalizeText.wpieEmptyTemplates),!1;if("delete"===i){wpiePluginSettings.deleteIds=0;var t=new bootstrap.Modal(jQuery(".wpie_delete_templates_data"),{backdrop:"static",keyboard:!1});t.show()}}),jQuery(document).on("click",".wpie_process_pause_btn",function(){var e=jQuery(this).closest("tr").find(".wpie_log_check").val();wpie_update_process_status("pause",e),jQuery(this).closest("td").removeClass("wpie_action_background").addClass("wpie_action_paused"),jQuery(this).closest("tr").find(".wpie_log_status").text(wpiePluginSettings.wpieLocalizeText.wpiePaused)}),jQuery(document).on("click",".wpie_process_resume_btn",function(){var e=jQuery(this).closest("tr").find(".wpie_log_check").val();wpie_update_process_status("bg",e),jQuery(this).closest("td").removeClass("wpie_action_paused").addClass("wpie_action_background"),jQuery(this).closest("tr").find(".wpie_log_status").text(wpiePluginSettings.wpieLocalizeText.wpieProcessing)}),jQuery(document).on("click",".wpie_process_stop_btn",function(){var e=jQuery(this).closest("tr").find(".wpie_log_check").val();wpie_update_process_status("stop",e),jQuery(this).closest("td").removeClass("wpie_action_paused wpie_action_background"),jQuery(this).closest("tr").find(".wpie_log_status").text(wpiePluginSettings.wpieLocalizeText.wpieStopped)}),jQuery(document).on("click",".wpie_delete_template_btn",function(){jQuery(this).closest(".wpie_section_content").addClass("wpie_active_section"),wpiePluginSettings.deleteIds=jQuery(this).closest("tr").find(".wpie_log_check").val();var e=new bootstrap.Modal(jQuery(".wpie_delete_templates_data"),{backdrop:"static",keyboard:!1});e.show()}),jQuery(document).on("click",".wpie_delete_templates",function(){wpieShowLoader();var e=jQuery(".wpie_active_section"),i="";e.hasClass("wpie_schedule_import_section")?i="schedule_import":e.hasClass("wpie_schedule_export_section")&&(i="schedule_export");var t="";return 0===wpiePluginSettings.deleteIds?(e.find(".wpie_log_check:checked").each(function(){t+=jQuery(this).val()+",",jQuery(this).closest("tr").remove()}),t=t.substr(0,t.length-1)):(t=wpiePluginSettings.deleteIds,e.find(".wpie_log_wrapper_"+t).remove()),wpieDeleteTemplates(t,i),0===e.find(".wpie_log_check").length?(e.find(".wpie_log_empty").show(),!1):void 0}),jQuery(document).on("click",".wpie_download_template_file_btn",function(){jQuery(".wpie_download_file").val(jQuery(this).closest("tr").find(".wpie_log_check").val()),jQuery(".wpie_download_file_frm").submit()}),jQuery(document).on("click",".wpie_template_file_log_btn",function(){jQuery(".wpie_download_import_log_id").val(jQuery(this).closest("tr").find(".wpie_log_check").val()),jQuery(".wpie_download_log_file_frm").submit()}),jQuery(document).on("click",".wpie_advanced_options_save",function(){wpieShowLoader();var e=0;jQuery(".wpie_delete_data_on_unistall").is(":checked")&&(e=1);var i={action:"wpie_save_advance_option",is_delete_data:e,wpieSecurity:wpiePluginSettings.wpieSecurity};jQuery.ajax({url:wpiePluginSettings.wpieAjaxURL,type:"GET",data:i,dataType:"json",async:!0,success:function(e){return"error"===e.status?(wpieSetErrorMsg(e.message),!1):(wpieSetSuccessMsg(e.message),void wpieHideLoader())},error:function(e,i){wpieHandleAjaxError(e,i)}})}),jQuery(document).on("click",".wpie_activate_license",function(){var e=jQuery(".wpie_license_key").val();return e.trim(),""===e?(wpieSetErrorMsg(wpiePluginSettings.wpieLocalizeText.wpieEmptyLicenseKey),!1):e.match(/^([a-f0-9]{8})-(([a-f0-9]{4})-){3}([a-f0-9]{12})$/i)?(wpieShowLoader(),void wpieChangeLicenseStatus("activate",e)):(wpieSetErrorMsg(wpiePluginSettings.wpieLocalizeText.wpieInvalidLicenseKey),!1)}),jQuery(document).on("click",".wpie_deactivate_license",function(){wpieShowLoader(),wpieChangeLicenseStatus("deactivate","")}),jQuery(document).on("click",".wpie_bg_and_cron_processing_btn",function(){wpieShowLoader();var e=jQuery(".wpie_bg_and_cron_processing:checked").val(),i=jQuery(".wpie_cron_token").val(),t={action:"wpie_save_bg_cron_processing",method:e,token:i,wpieSecurity:wpiePluginSettings.wpieSecurity};jQuery.ajax({url:wpiePluginSettings.wpieAjaxURL,type:"GET",data:t,dataType:"json",async:!0,success:function(e){return"error"===e.status?(wpieSetErrorMsg(e.message),!1):(wpieSetSuccessMsg(e.message),void wpieHideLoader())},error:function(e,i){wpieHandleAjaxError(e,i)}})}),jQuery(document).on("click",".wpie_switch_label",function(){return jQuery(this).hasClass("wpie_switch_label_disabled")?(wpieSetErrorMsg(wpiePluginSettings.wpieLocalizeText.wpieProFeatureOnly),!1):void 0});