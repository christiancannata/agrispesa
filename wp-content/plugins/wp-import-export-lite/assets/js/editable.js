!function(e){"use strict";var t=function(e){return e.replace(/</gm,"&lt;").replace(/>/gm,"&gt;")};e.fn.wpie_editable=function(i,r){if("function"!=typeof r&&(r=function(){}),"string"==typeof i)var a=this,n=i,s="input";else{if("object"!=typeof i)throw'Argument Error - jQuery.wpie_editable("click", function(){ ~~ })';var a=i.trigger||this;"string"==typeof a&&(a=e(a));var n=i.action||"click",s=i.type||"input"}var c=this,l={};return l.start=function(i){a.unbind("clickhold"===n?"mousedown":n),a!==c&&a.hide();var o=("textarea"===s?c.text().replace(/<br( \/)?>/gm,"\n").replace(/&gt;/gm,">").replace(/&lt;/gm,"<"):c.text()).replace(/^\s+/,"").replace(/\s+$/,""),u=e("textarea"===s?"<textarea>":"<input>");u.val(o).css("width","textarea"===s?"100%":c.width()+c.height()).css("font-size","100%").css("margin",0).attr("id","wpie_editable_"+1*new Date).addClass("wpie_editable"),c.addClass("wpie_editable_wrapper"),"textarea"===s&&u.css("height",c.height());var p=function(){c.removeClass("wpie_editable_wrapper");var e=u.val().replace(/^\s+/,"").replace(/\s+$/,""),i=t(e);"textarea"===s&&(i=i.replace(/[\r\n]/gm,"<br />")),c.html(i),r({value:e,target:c,old_value:o}),l.register(),a!==c&&a.show()};u.blur(p),"input"===s&&u.keydown(function(e){13===e.keyCode&&p()}),c.html(u),u.focus()},l.register=function(){if("clickhold"===n){var e=null;a.bind("mousedown",function(t){e=setTimeout(function(){l.start(t)},500)}),a.bind("mouseup mouseout",function(t){clearTimeout(e)})}else a.bind(n,l.start)},l.register(),this}}(jQuery);