!function(e){"use strict";var i=function(e){return e.replace(/</gm,"&lt;").replace(/>/gm,"&gt;")};e.fn.wpie_editable=function(t,p){if("function"!=typeof p&&(p=function(){}),"string"==typeof t)var r=this,a=t,n="input";else{if("object"!=typeof t)throw'Argument Error - jQuery.wpie_editable("click", function(){ ~~ })';var r=t.trigger||this;"string"==typeof r&&(r=e(r));var a=t.action||"click",n=t.type||"input"}var o=this,s={};return s.start=function(t){r.unbind("clickhold"===a?"mousedown":a),r!==o&&r.hide();var l=("textarea"===n?o.text().replace(/<br( \/)?>/gm,"\n").replace(/&gt;/gm,">").replace(/&lt;/gm,"<"):o.text()).replace(/^\s+/,"").replace(/\s+$/,""),_=e("textarea"===n?"<textarea>":"<input>");_.val(l).css("width","textarea"===n?"100%":o.width()+o.height()).css("font-size","100%").css("margin",0).attr("id","wpie_editable_"+1*new Date).addClass("wpie_editable"),o.addClass("wpie_editable_wrapper"),"textarea"===n&&_.css("height",o.height());var u=function(){o.removeClass("wpie_editable_wrapper");var e=_.val().replace(/^\s+/,"").replace(/\s+$/,""),t=i(e);"textarea"===n&&(t=t.replace(/[\r\n]/gm,"<br />")),o.html(t),p({value:e,target:o,old_value:l}),s.register(),r!==o&&r.show()};_.blur(u),"input"===n&&_.keydown(function(e){13===e.keyCode&&u()}),o.html(_),_.focus()},s.register=function(){if("clickhold"===a){var e=null;r.bind("mousedown",function(i){e=setTimeout(function(){s.start(i)},500)}),r.bind("mouseup mouseout",function(i){clearTimeout(e)})}else r.bind(a,s.start)},s.register(),this}}(jQuery);