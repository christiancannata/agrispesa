!function(r){"use strict";r("#ywrac_user_guest_enabled-privacy").on("change",function(){r(this).is(":checked")?r("tr.yith-plugin-fw-panel-wc-row.textarea").show():r("tr.yith-plugin-fw-panel-wc-row.textarea").hide()}),r("#ywrac_user_guest_enabled-ever").on("change",function(){r(this).is(":checked")&&r("tr.yith-plugin-fw-panel-wc-row.textarea").hide()}),r("#ywrac_user_guest_enabled-never").on("change",function(){r(this).is(":checked")&&r("tr.yith-plugin-fw-panel-wc-row.textarea").hide()}),r("#ywrac_user_guest_enabled-privacy").change(),r(".ywrac_send_email").on("click",function(e){e.stopPropagation();var a=r(this),t=a.prev("select"),n="undefined"!=typeof yith_ywrac_admin&&yith_ywrac_admin.block_loader,e=a.data("type"),i=a.data("id");0==t.length&&(t=r("#ywrac-email-template")),a.after(' <img src="'+n+'" >'),r.post(yith_ywrac_admin.ajaxurl,{action:"ywrac_email_send",cart_id:i,email_template:t.val(),type:e,security:yith_ywrac_admin.send_email_nonce},function(e){"no"!=e.email_sent&&(e=yith_ywrac_admin.sent_label+" "+e.email_name+" ("+e.email_sent+")",(0<a.parents(".yith-ywrac-info-cart").length?a.parents(".yith-ywrac-info-cart").find(".ywrac_email_status"):r('.email_status[data-id="'+i+'"]')).html(e),a.next().remove())})});var i=r(".ywrac-button-sent-email");i.on("click",function(e){e.preventDefault(),e.stopPropagation();var a=r(this),t=a.data("id"),n="undefined"!=typeof yith_ywrac_admin&&yith_ywrac_admin.block_loader,e=r("#_ywrac_email_to_send").val();a.after(' <img src="'+n+'" >'),r(".email-sent-label").remove(),r.post(yith_ywrac_admin.ajaxurl,{action:"ywrac_email_test_send",email_to_sent:e,email_template:t,security:yith_ywrac_admin.send_email_nonce},function(e){1==e.email_sent&&(a.next().remove(),i.after(' <span class="email-sent-label">'+yith_ywrac_admin.sent_label_test+"</span>"))})}),r(".ywrac-reset-reports").on("click",function(e){e.stopPropagation();var a="undefined"!=typeof yith_ywrac_admin&&yith_ywrac_admin.block_loader,e=r("#ywrac_reset_reports_nonce").val();!0===window.confirm(yith_ywrac_admin.reset_confirmation)&&(r(this).after(' <img src="'+a+'" >'),r.post(yith_ywrac_admin.ajaxurl,{action:"ywrac_reset_reports",nonce:e},function(e){!0===e.reset&&(r(this).next().remove(),location.reload())}))}),r(document).on("change",".ywrac-toggle-enabled input",function(){var e="yes"===r(this).val()?"yes":"no",a=r(this).closest(".ywrac-toggle-enabled"),t=a.data("email-template-id"),a=a.data("security");r.ajax({type:"POST",data:{action:"email_template_toggle_enabled",id:t,enabled:e,security:a},url:yith_ywrac_admin.ajaxurl,success:function(e){"undefined"!=typeof e.error&&alert(e.error),window.onbeforeunload=function(){return null}}})})}(jQuery);