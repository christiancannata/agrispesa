"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(v){var c=new Date(1970,1,1,0,0,0),T=86400,n={className:null,minTime:null,maxTime:null,durationTime:null,step:30,showDuration:!1,timeFormat:"g:ia",scrollDefaultNow:!1,scrollDefaultTime:!1,selectOnBlur:!1,disableTouchKeyboard:!1,forceRoundTime:!1,appendTo:"body",orientation:"ltr",disableTimeRanges:[],closeOnWindowScroll:!1,typeaheadHighlight:!0,noneOption:!1},b={am:"am",pm:"pm",AM:"AM",PM:"PM",decimal:".",mins:"mins",hr:"hr",hrs:"hrs"},y={init:function(r){return this.each(function(){var e=v(this),i=[];for(var t in n)e.data(t)&&(i[t]=e.data(t));var a=v.extend({},n,i,r);a.lang&&(b=v.extend(b,a.lang)),a=s(a),e.data("timepicker-settings",a),e.addClass("ui-timepicker-input"),a.useSelect?o(e):(e.prop("autocomplete","off"),e.on("click.timepicker focus.timepicker",y.show),e.on("change.timepicker",m),e.on("keydown.timepicker",d),e.on("keyup.timepicker",f),m.call(e.get(0)))})},show:function(e){e&&e.preventDefault();var i=v(this),t=i.data("timepicker-settings");if(t.useSelect)i.data("timepicker-list").focus();else{H(i)&&i.blur();var a=i.data("timepicker-list");if(!i.prop("readonly")&&(a&&0!==a.length&&"function"!=typeof t.durationTime||(o(i),a=i.data("timepicker-list")),!a.is(":visible"))){y.hide(),a.show();var r={};"rtl"==t.orientation?r.left=i.offset().left+i.outerWidth()-a.outerWidth()+parseInt(a.css("marginLeft").replace("px",""),10):r.left=i.offset().left+parseInt(a.css("marginLeft").replace("px",""),10),i.offset().top+i.outerHeight(!0)+a.outerHeight()>v(window).height()+v(window).scrollTop()?r.top=i.offset().top-a.outerHeight()+parseInt(a.css("marginTop").replace("px",""),10):r.top=i.offset().top+i.outerHeight()+parseInt(a.css("marginTop").replace("px",""),10),a.offset(r);var n,s=a.find(".ui-timepicker-selected");return s.length||(p(i)?s=u(i,a,D(p(i))):t.scrollDefaultNow?s=u(i,a,D(new Date)):!1!==t.scrollDefaultTime&&(s=u(i,a,D(t.scrollDefaultTime)))),s&&s.length?(n=a.scrollTop()+s.position().top-s.outerHeight(),a.scrollTop(n)):a.scrollTop(0),v(document).on("touchstart.ui-timepicker mousedown.ui-timepicker",l),t.closeOnWindowScroll&&v(document).on("scroll.ui-timepicker",l),i.trigger("showTimepicker"),this}}},hide:function(){var e=v(this),i=e.data("timepicker-settings");return i&&i.useSelect&&e.blur(),v(".ui-timepicker-wrapper:visible").each(function(){var e=v(this),i=e.data("timepicker-input"),t=i.data("timepicker-settings");t&&t.selectOnBlur&&R(i),e.hide(),i.trigger("hideTimepicker")}),this},option:function(e,i){var t=this,a=t.data("timepicker-settings"),r=t.data("timepicker-list");if("object"==(void 0===e?"undefined":_typeof(e)))a=v.extend(a,e);else if("string"==typeof e&&void 0!==i)a[e]=i;else if("string"==typeof e)return a[e];return a=s(a),t.data("timepicker-settings",a),r&&(r.remove(),t.data("timepicker-list",!1)),a.useSelect&&o(t),this},getSecondsFromMidnight:function(){return D(p(this))},getTime:function(e){var i=p(this);if(!i)return null;e=e||new Date;var t=D(i),a=new Date(e);return a.setHours(t/3600),a.setMinutes(t%3600/60),a.setSeconds(t%60),a.setMilliseconds(0),a},setTime:function(e){var i=this,t=M(D(e),i.data("timepicker-settings").timeFormat);return S(i,t),i.data("timepicker-list")&&C(i,i.data("timepicker-list")),this},remove:function(){var e=this;if(e.hasClass("ui-timepicker-input"))return e.removeAttr("autocomplete","off"),e.removeClass("ui-timepicker-input"),e.removeData("timepicker-settings"),e.off(".timepicker"),e.data("timepicker-list")&&e.data("timepicker-list").remove(),e.removeData("timepicker-list"),this}};function s(e){if(e.minTime&&(e.minTime=D(e.minTime)),e.maxTime&&(e.maxTime=D(e.maxTime)),e.durationTime&&"function"!=typeof e.durationTime&&(e.durationTime=D(e.durationTime)),0<e.disableTimeRanges.length){for(var i in e.disableTimeRanges)e.disableTimeRanges[i]=[D(e.disableTimeRanges[i][0]),D(e.disableTimeRanges[i][1])];e.disableTimeRanges=e.disableTimeRanges.sort(function(e,i){return e[0]-i[0]});for(i=e.disableTimeRanges.length-1;0<i;i--)e.disableTimeRanges[i][0]<=e.disableTimeRanges[i-1][1]&&(e.disableTimeRanges[i-1]=[Math.min(e.disableTimeRanges[i][0],e.disableTimeRanges[i-1][0]),Math.max(e.disableTimeRanges[i][1],e.disableTimeRanges[i-1][1])],e.disableTimeRanges.splice(i,1))}return e}function o(i){var t,e=i.data("timepicker-settings"),a=i.data("timepicker-list");if(a&&a.length&&(a.remove(),i.data("timepicker-list",!1)),e.useSelect?t=a=v("<select />",{class:"ui-timepicker-select"}):(a=v("<ul />",{class:"ui-timepicker-list"}),(t=v("<div />",{class:"ui-timepicker-wrapper",tabindex:-1})).css({display:"none",position:"absolute"}).append(a)),e.noneOption)if(!0===e.noneOption&&(e.noneOption=e.useSelect?"Time...":"None"),v.isArray(e.noneOption))for(var r in e.noneOption){var n=w(e.noneOption[r],e.useSelect);a.append(n)}else{n=w(e.noneOption,e.useSelect);a.append(n)}e.className&&t.addClass(e.className),null===e.minTime&&null===e.durationTime||!e.showDuration||t.addClass("ui-timepicker-with-duration");var s=e.minTime;"function"==typeof e.durationTime?s=D(e.durationTime()):null!==e.durationTime&&(s=e.durationTime);var o=null!==e.minTime?e.minTime:0,c=null!==e.maxTime?e.maxTime:o+T-1;c<=o&&(c+=T),c===T-1&&-1!==e.timeFormat.indexOf("H")&&(c=T);for(var l,u=e.disableTimeRanges,m=0,p=u.length,r=o;r<=c;r+=60*e.step){var d,f,h,g=r,k=M(g,e.timeFormat);e.useSelect?(d=v("<option />",{value:k})).text(k):((d=v("<li />")).data("time",g<=86400?g:g%86400),d.text(k)),null===e.minTime&&null===e.durationTime||!e.showDuration||(f=function(e){var i,t=Math.round(e/60);{var a;i=Math.abs(t)<60?[t,b.mins]:60==t?["1",b.hr]:(a=(t/60).toFixed(1),"."!=b.decimal&&(a=a.replace(".",b.decimal)),[a,b.hrs])}return i.join(" ")}(r-s),e.useSelect?d.text(d.text()+" ("+f+")"):((h=v("<span />",{class:"ui-timepicker-duration"})).text(" ("+f+")"),d.append(h))),m<p&&(g>=u[m][1]&&(m+=1),u[m]&&g>=u[m][0]&&g<u[m][1]&&(e.useSelect?d.prop("disabled",!0):d.addClass("ui-timepicker-disabled"))),a.append(d)}t.data("timepicker-input",i),i.data("timepicker-list",t),e.useSelect?(a.val(x(i.val(),e)),a.on("focus",function(){v(this).data("timepicker-input").trigger("showTimepicker")}),a.on("blur",function(){v(this).data("timepicker-input").trigger("hideTimepicker")}),a.on("change",function(){S(i,v(this).val(),"select")}),i.hide().after(a)):("string"==typeof(l=e.appendTo)?l=v(l):"function"==typeof l&&(l=l(i)),l.append(t),C(i,a),a.on("click","li",function(e){i.off("focus.timepicker"),i.on("focus.timepicker-ie-hack",function(){i.off("focus.timepicker-ie-hack"),i.on("focus.timepicker",y.show)}),H(i)||i[0].focus(),a.find("li").removeClass("ui-timepicker-selected"),v(this).addClass("ui-timepicker-selected"),R(i)&&(i.trigger("hideTimepicker"),t.hide())}))}function w(e,i){var t,a,r;return"object"==(void 0===e?"undefined":_typeof(e))?(t=e.label,a=e.className,r=e.value):"string"==typeof e?t=e:v.error("Invalid noneOption value"),i?v("<option />",{value:r,class:a,text:t}):v("<li />",{class:a,text:t}).data("time",r)}function x(e,i){if(v.isNumeric(e)||(e=D(e)),null===e)return null;var t=60*i.step;return M(Math.round(e/t)*t,i.timeFormat)}function l(e){var i=v(e.target);0===i.closest(".ui-timepicker-input").length&&0===i.closest(".ui-timepicker-wrapper").length&&(y.hide(),v(document).unbind(".ui-timepicker"))}function H(e){var i=e.data("timepicker-settings");return(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&i.disableTouchKeyboard}function u(e,i,r){if(!r&&0!==r)return!1;var t=e.data("timepicker-settings"),n=!1,s=30*t.step;return i.find("li").each(function(e,i){var t=v(i);if("number"==typeof t.data("time")){var a=t.data("time")-r;return Math.abs(a)<s||a==s?(n=t,!1):void 0}}),n}function C(e,i){i.find("li").removeClass("ui-timepicker-selected");var t,a,r=D(p(e));null===r||(t=u(e,i,r))&&(((a=t.offset().top-i.offset().top)+t.outerHeight()>i.outerHeight()||a<0)&&i.scrollTop(i.scrollTop()+t.position().top-t.outerHeight()),t.addClass("ui-timepicker-selected"))}function m(e){var i,t,a,r,n,s;""!==this.value&&((i=v(this)).data("timepicker-list"),(!i.is(":focus")||e&&"change"==e.type)&&(null!==(t=D(this.value))?(a=i.data("timepicker-settings"),r=!1,(null!==a.minTime&&t<a.minTime||null!==a.maxTime&&t>a.maxTime)&&(r=!0),v.each(a.disableTimeRanges,function(){if(t>=this[0]&&t<this[1])return!(r=!0)}),a.forceRoundTime&&((n=t%(60*a.step))>=30*a.step?t+=60*a.step-n:t-=n),s=M(t,a.timeFormat),r?S(i,s,"error")&&i.trigger("timeRangeError"):S(i,s)):i.trigger("timeFormatError")))}function p(e){return e.is("input")?e.val():e.data("ui-timepicker-value")}function S(e,i,t){var a;return e.is("input")&&(e.val(i),(a=e.data("timepicker-settings")).useSelect&&e.data("timepicker-list").val(x(i,a))),e.data("ui-timepicker-value")!=i?(e.data("ui-timepicker-value",i),"select"==t?e.trigger("selectTime").trigger("changeTime").trigger("change"):"error"!=t&&e.trigger("changeTime"),1):void e.trigger("selectTime")}function d(e){var i=v(this),t=i.data("timepicker-list");if(!t||!t.is(":visible")){if(40!=e.keyCode)return!0;H(i)||i.focus()}switch(e.keyCode){case 13:return R(i)&&y.hide.apply(this),e.preventDefault(),!1;case 38:var a=t.find(".ui-timepicker-selected");return a.length?a.is(":first-child")||(a.removeClass("ui-timepicker-selected"),a.prev().addClass("ui-timepicker-selected"),a.prev().position().top<a.outerHeight()&&t.scrollTop(t.scrollTop()-a.outerHeight())):(t.find("li").each(function(e,i){if(0<v(i).position().top)return a=v(i),!1}),a.addClass("ui-timepicker-selected")),!1;case 40:return 0===(a=t.find(".ui-timepicker-selected")).length?(t.find("li").each(function(e,i){if(0<v(i).position().top)return a=v(i),!1}),a.addClass("ui-timepicker-selected")):a.is(":last-child")||(a.removeClass("ui-timepicker-selected"),a.next().addClass("ui-timepicker-selected"),a.next().position().top+2*a.outerHeight()>t.outerHeight()&&t.scrollTop(t.scrollTop()+a.outerHeight())),!1;case 27:t.find("li").removeClass("ui-timepicker-selected"),y.hide();break;case 9:y.hide();break;default:return!0}}function f(e){var i=v(this),t=i.data("timepicker-list");if(!t||!t.is(":visible"))return!0;if(!i.data("timepicker-settings").typeaheadHighlight)return t.find("li").removeClass("ui-timepicker-selected"),!0;switch(e.keyCode){case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 65:case 77:case 80:case 186:case 8:case 46:C(i,t);break;default:return}}function R(e){var i=e.data("timepicker-settings"),t=e.data("timepicker-list"),a=null,r=t.find(".ui-timepicker-selected");return!r.hasClass("ui-timepicker-disabled")&&(r.length?a=r.data("time"):p(e)&&(a=D(p(e)),C(e,t)),null!==a&&("string"==typeof a?e.val(a):S(e,M(a,i.timeFormat),"select")),1)}function M(e,i){if(null!==e){var t=new Date(c.valueOf()+1e3*e);if(!isNaN(t.getTime())){for(var a,r,n="",s=0;s<i.length;s++)switch(r=i.charAt(s)){case"a":n+=11<t.getHours()?b.pm:b.am;break;case"A":n+=11<t.getHours()?b.PM:b.AM;break;case"g":n+=0===(a=t.getHours()%12)?"12":a;break;case"G":n+=t.getHours();break;case"h":0!==(a=t.getHours()%12)&&a<10&&(a="0"+a),n+=0===a?"12":a;break;case"H":a=t.getHours(),e===T&&(a=24),n+=9<a?a:"0"+a;break;case"i":var o=t.getMinutes();n+=9<o?o:"0"+o;break;case"s":n+=9<(e=t.getSeconds())?e:"0"+e;break;default:n+=r}return n}}}function D(e){if(""===e)return null;if(!e||e+0==e)return e;"object"==(void 0===e?"undefined":_typeof(e))&&(e=e.getHours()+":"+r(e.getMinutes())+":"+r(e.getSeconds())),e=e.toLowerCase();new Date(0);var i=-1===e.indexOf(":")?(i=e.match(/^([0-9]):?([0-5][0-9])?:?([0-5][0-9])?\s*([pa]?)m?$/))||e.match(/^([0-2][0-9]):?([0-5][0-9])?:?([0-5][0-9])?\s*([pa]?)m?$/):e.match(/^(\d{1,2})(?::([0-5][0-9]))?(?::([0-5][0-9]))?\s*([pa]?)m?$/);if(!i)return null;var t=parseInt(+i[1],10),a=i[4]?12==t?"p"==i[4]?12:0:t+("p"==i[4]?12:0):t;return 3600*a+60*(+i[2]||0)+(+i[3]||0)}function r(e){return("0"+e).slice(-2)}v.fn.timepicker=function(e){return this.length?y[e]?this.hasClass("ui-timepicker-input")?y[e].apply(this,Array.prototype.slice.call(arguments,1)):this:"object"!==(void 0===e?"undefined":_typeof(e))&&e?void v.error("Method "+e+" does not exist on jQuery.timepicker"):y.init.apply(this,arguments):this}});