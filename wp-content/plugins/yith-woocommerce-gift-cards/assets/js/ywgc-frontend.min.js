!function(n){var t,a,c,i,e,o,r,d,g;function s(e){n("button.gift_card_add_to_cart_button").attr("disabled",!e)}function u(){var t=n("button.ywgc-amount-buttons"),a=n("input.ywgc-amount-buttons"),e=n("button.ywgc-amount-buttons:first"),c=(e.addClass("selected_button"),e.hasClass("selected_button")&&n("input.ywgc-amount-buttons:first").attr("name","gift_amounts"),n(".ywgc-form-preview-amount").text(e.data("wc-price")),t.on("click",function(e){e.preventDefault(),t.removeClass("selected_button"),a.removeClass("selected_button"),a.removeAttr("name"),n(this).addClass("selected_button"),n(this).next().addClass("selected_button")}),e.data("wc-price"));t.on("click",function(e){e.preventDefault(),a.removeAttr("name"),t.data("price")?(s(!0),c=n("input.selected_button").data("wc-price"),n("input.selected_button").attr("name","gift_amounts")):s(!1),e=c,n(".ywgc-form-preview-amount").text(e)})}function m(){c(n("div.cart_totals")),n.ajax({url:e("get_cart_totals"),dataType:"html",success:function(e){n("div.cart_totals").replaceWith(e)}}),n(document.body).trigger("update_checkout")}"undefined"!=typeof ywgc_data&&(n(document).on("ywgc-picture-changed",function(e,t,a){n(".ywgc-template-design").remove(),n(".ywgc-design-type").remove(),n("form.cart").append('<input type="hidden" class="ywgc-design-type" name="ywgc-design-type" value="'+t+'">'),n("form.cart").append('<input type="hidden" class="ywgc-template-design" name="ywgc-template-design" value="'+a+'">')}),n(function(){n(".datepicker").datepicker({dateFormat:ywgc_data.date_format,minDate:1,maxDate:"+1Y"}),n(".ywgc-choose-design-preview .ywgc-design-list li:first-child .ywgc-preset-image img").click()}),u(),t=n(".product-type-gift-card .woocommerce-product-gallery__image a"),a=n(".product-type-gift-card .woocommerce-product-gallery__image--placeholder"),n(".ywgc-preset-image.ywgc-default-product-image img").addClass("selected_design_image"),n(document).on("click","form.gift-cards_form.cart .ywgc-preset-image img",function(e){e.preventDefault();var e=n(this).parent().data("design-id");n(".ywgc-preset-image img").removeClass("selected_design_image"),n(this).addClass("selected_design_image"),n(document).trigger("ywgc-picture-changed",["template",e]),n(this).hasClass("selected_design_image")&&(e='<img src="'+(e=n(this).parent().data("design-url"))+'" class="wp-post-image size-full" alt="" data-caption="" data-src="'+e+'" data-large_image="'+e+'" data-large_image_width="1024" data-large_image_height="1024" sizes="(max-width: 600px) 100vw, 600px" '+n(this).attr("srcset")+'width="600" height="600">',(0!=t.length?n(".product-type-gift-card .woocommerce-product-gallery__image a"):(n(".woocommerce-product-gallery__image--placeholder img").remove,a)).html(e))}),n(document).on("click",".ywgc-preset-image img",function(e){e.preventDefault();e=n(this).parent().data("design-id");n(".ywgc-preset-image img").removeClass("selected_design_image"),n(".ywgc-preset-image").removeClass("selected_image_parent"),n(this).addClass("selected_design_image"),n(this).parent().addClass("selected_image_parent"),n(document).trigger("ywgc-picture-changed",["template",e])}),n(document).on("click","a.ywgc-show-giftcard",function(){return n(".ywgc_enter_code").slideToggle(300,function(){n(".yith_wc_gift_card_blank_brightness").length||(n(".ywgc_enter_code").find(":input:eq( 0 )").focus(),n(".ywgc_enter_code").keyup(function(e){13===e.keyCode&&n("button.ywgc_apply_gift_card_button").click()}))}),!1}),n("button.ywgc-do-edit").css("display","inline"),n(document).on("input","#ywgc-edit-message",function(e){n(".ywgc-card-message").html(n("#ywgc-edit-message").val())}),n(document).on("change",".gift-cards-list select",function(e){u()}),n(document).on("click","a.customize-gift-card",function(e){e.preventDefault(),n("div.summary.entry-summary").after('<div class="ywgc-customizer"></div>')}),n(".variations_form.cart").on("found_variation",function(e,t){void 0!==t&&(t=(""!=t.price_html?n(t.price_html):n(".product-type-variable").find(".woocommerce-Price-amount.amount").first()).html(),t=t,n("div.ywgc-card-amount span.amount").html(t))}),n('.ywgc-single-recipient input[name="ywgc-recipient-email[]"]').each(function(e,t){n(this).on("input",function(){n(this).closest(".ywgc-single-recipient").find(".ywgc-bad-email-format").remove()})}),n(document).on("submit",".gift-cards_form",function(e){var c=!0;n('.ywgc-single-recipient input[name="ywgc-recipient-email[]"]').each(function(e,t){var a;n(this).val()&&(a=n(this).val(),new RegExp("^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$","i").test(a)||(n(this).closest(".ywgc-single-recipient").find(".ywgc-bad-email-format").remove(),n(this).after('<span class="ywgc-bad-email-format">'+ywgc_data.email_bad_format+"</span>"),c=!1))}),c||e.preventDefault()}),n(document).on("click","a.ywgc-remove-gift-card ",function(e){e.preventDefault();var t=n(e.currentTarget).parents("table"),e=n(e.currentTarget).data("gift-card-code"),e=(c(t),{security:ywgc_data.gift_card_nonce,code:e,action:"ywgc_remove_gift_card_code"});n.ajax({type:"POST",url:ywgc_data.ajax_url,data:e,dataType:"html",success:function(e){o(e),n(document.body).trigger("removed_gift_card"),i(t)},complete:function(){m()}})}),n(document).on("click","button.ywgc_apply_gift_card_button",function(e){e.preventDefault();var t=n(this).closest("div.ywgc_enter_code"),a=(c(t),t.find('input[ name="gift_card_code" ]')),e=a.val(),e={security:ywgc_data.gift_card_nonce,code:e,action:"ywgc_apply_gift_card_code"};n.ajax({type:"POST",url:ywgc_data.ajax_url,data:e,dataType:"html",success:function(e){o(e),n(document.body).trigger("applied_gift_card")},complete:function(){i(t),a.val(""),m()}})}),c=function(e){e.addClass("processing").block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},i=function(e){e.removeClass("processing").unblock()},e=function(e){return ywgc_data.wc_ajax_url.toString().replace("%%endpoint%%",e)},o=function(e){n(".woocommerce-error, .woocommerce-message").remove(),n(ywgc_data.notice_target).after(e),n(".ywgc_have_code").length&&n(".ywgc_enter_code").slideUp("300")},n(document).on("qv_loader_stop yit_quick_view_loaded flatsome_quickview",function(){u()}),n(document).on("click","button.yith-add-new-gc-my-account-button",function(e){e.preventDefault(),n(this).parent().prev(".form-link-gift-card-to-user").toggle("slow")}),(r=n(".ywgc-recipient-name input")).on("change keyup",function(e){e.preventDefault();e=r.val();n(".ywgc-form-preview-to-content").text(e)}),(d=n(".ywgc-sender-name input")).on("change keyup",function(e){e.preventDefault();e=d.val();n(".ywgc-form-preview-from-content").text(e)}),(g=n(".ywgc-message textarea")).on("change keyup",function(e){e.preventDefault();e=g.val();n(".ywgc-form-preview-message").text(e)}))}(jQuery);